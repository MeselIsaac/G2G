<!DOCTYPE html>
<html>
  <head>
    <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
    <title>Removing Markers</title>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 425px;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
    </style>
  </head>
  <body>
    <div id="floating-panel">
      <input onclick="clearMarkers();" type=button value="Hide Markers">
      <input onclick="showMarkers();" type=button value="Show All Markers">
      <input onclick="deleteMarkers();" type=button value="Delete Markers">
    </div>
    <div id="map"></div>
    <p>Click on the map to add markers.</p>
    <script>

      // In the following example, markers appear when the user clicks on the map.
      // The markers are stored in an array.
      // The user can then click an option to hide, show or delete the markers.
      var map;
      var markers = [];
      var temp_marker = {};

      function initMap() {
        var haightAshbury = {lat: 37.769, lng: -122.446};

        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: haightAshbury,
          mapTypeId: 'terrain'
        });

        // This event listener will call addMarker() when the map is clicked.
        // map.addListener('click', function(event) {
        //   addMarker(event.latLng);
        // });

        map.addListener('click', function(event) {
          console.log("Latitude: "+event.latLng.lat()+" "+", longitude: "+event.latLng.lng());
          let marker = new google.maps.Marker({
            position: {lat: event.latLng.lat(), lng: event.latLng.lng()},
            map: map,
            title: 'Click to zoom'
          });
          temp_marker = marker;
          markers.push(marker);
          console.log(markers);

        });


        var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
            '<div id="bodyContent">'+
            '<p><b>Haight Ashbury</b>, also referred to as <b>the coolest area in San Francisco</b>, ' +
            'cool and hip area in San Francisco, California. Lots of people come to SF '+
            'in order to experience the amazing climate. San Francisco is a very expensive '+
            'city, in fact the Bay Area in general is the most expensive in USA. '+
            '</p>'+
            '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
            'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
            '(last visited June 22, 2009).</p>'+
            '</div>'+
            '</div>';

        var infowindow = new google.maps.InfoWindow({
          content: contentString
        });

        var marker = new google.maps.Marker({
          position: haightAshbury,
          map: map,
          title: 'Haight Ashbury'
        });
        marker.addListener('click', function() {
          infowindow.open(map, marker);
        });
      }


      // Sets the map on all markers in the array.
      function setMapOnAll(map) {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(map);
        }
      }

      // Removes the markers from the map, but keeps them in the array.
      function clearMarkers() {
        setMapOnAll(null);
      }

      // Shows any markers currently in the array.
      function showMarkers() {
        setMapOnAll(map);
      }

      // Deletes all markers in the array by removing references to them.
      function deleteMarkers() {
        clearMarkers();
        markers = [];
      }


    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBY_vuhzmSgKE3XRutXaWk2MUstXdnrKZY&callback=initMap">
    </script>

    <p>
      </p>
        <form id="submitForm" action="#" method="post">
         <div>
           Map Title:<br>
      <input type="text" id="title" value="Australia"><br>

        Description:<br>
      <input type="text" id="description" value="Enter description here"><br>

        Rating:<br>
      <input type="text" id="rating" value="On a scale of 1-5"><br>

      <input type="submit" value="Submit">
         </div>
       </form>

  </body>
  <script>
    console.log('fsfs');
    $('#submitForm').on('submit', () => {
      console.log("");
      const data = {
        "Latitude": temp_marker.position.lat(),
        "Longitude": temp_marker.position.lng(),
        "Title": $('#title').val(),
        "Description": $('#description').val(),
        "Rating": $('#rating').val()
      };
      // declared an empoty object
      console.log("THE MARKERS ARE HERE");
      console.log(data);

      // use data object to store values (lat/lng title ,etc)
      // use ajax to send out this data object to the server
      return false;
    })
  </script>
</html>
